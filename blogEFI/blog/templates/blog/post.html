{% extends 'core/base.html' %}
{%block title%}Nuevo Post{%endblock %}

{%block content %}
{%load static %}
<section class="my-5" style="background-color: burlywood;">
    <div class="container py-5">
        <div class="col-xl-9 col-lg-10 rounded mx-auto" style="background-color: rgb(224, 224, 224);">
            <div class="text-center  p-5">
                <h2 class="mb-5">
                    <span>Nuevo Post</span>
                </h2>
                <!-- Formulario de contacto -->
                <form enctype="multipart/form-data" action="" method="post">
                    {% csrf_token %}
                    <div class="form-row justify-content-center">
                        <div class="form-group col-md-6">
                            <label for="titulo">Titulo</label>
                            <div class="form-group">
                                {{form.title}}
                            </div>
                            {{form.title.errors}}
                        </div>
                        <div class="form-group  col-md-4">
                            <label for="author">Autor</label>
                            <div class="form-group">
                                {{form.author}}
                            </div>
                            {{form.author.errors}}
                        </div>
                        <div class="form-group col-md-6">
                            <label for="id_image">Cargar Imagen</label>
                            <div class="custom-file">
                                {{form.image}}
                                <label class="custom-file-label text-left" for="id_image">Choose file</label>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="category">Categoria</label>
                            <div class="form-group">
                                {{form.category}}
                            </div>
                            {{form.category.errors}}
                        </div>
                        <div class="form-group col-md-10">
                            <label for="content">Contenido</label>
                            <div class="form-group">
                                {{form.content}}
                            </div>
                            {{form.content.errors}}
                        </div>
                    </div>
                    <input type="submit" value="Cargar" class="btn btn-primary col-md-3" />
                </form>
                {%if 'ok' in request.GET %}
                <a>Agregado correctamente</a>
                {%endif%}
                {%if 'fail' in request.GET %}
                <a>La petici√≥n fallo</a>
                {%endif%}
                <!-- Fin formulario de contacto -->
            </div>
        </div>
    </div>
    </div>
</section>
<script>
    $(document).ready(function () {
            console.log('test')
        })
        document.querySelector('.custom-file-input').addEventListener('change', function (e) {
            var fileName = document.getElementById("id_image").files[0].name;
            var nextSibling = e.target.nextElementSibling
            nextSibling.innerText = fileName
        })

</script>
{%endblock%}